# 5주차 과제

## 계산기 만들기

- 기본 제공된 계산기 마크업 & 스타일링에 계산기 기능 구현하기

---

## 목차

- [구현 방식](#구현-방식)
- [예외 처리](#예외-처리)
- [오류 해결 과정](#오류-해결-과정)
- [회고](#회고)

---

## 구현 방식

1. 계산기의 숫자, 연산자, 소수점, 결과(=), 클리어(AC/CE) 버튼은 모두 `data-button-type`과 `data-key` 속성을 통해 기능을 구분하고, 이벤트 위임 처리했습니다.

2. 입력된 숫자는 기본적으로 "0"일 경우 덮어쓰고, 기존에 다른 값이 있으면 그 뒤에 이어서 표시되도록 했습니다.

3. 연산자 버튼을 누르면 현재 디스플레이의 값을 `data-first-value`로 저장하고, 다음 숫자 입력을 기다리게 됩니다.

4. `=` 버튼 클릭 시 `firstValue`, `operator`, `secondValue`를 이용하여 연산을 수행한 후 결과를 디스플레이에 표시합니다.

5. 소수점 버튼은 이미 .이 포함된 경우에는 추가 입력을 막도록 하여 중복 입력을 방지했습니다.

6. AC와 CE는 사용자의 입력 여부에 따라 전환됩니다.
   입력 전에는 AC, 입력 후에는 CE로 바뀌고 다시 AC로 돌아가는 방식입니다.

7. 연산자 키를 누를 때는 시각적인 피드백을 위해 .is-pressed 클래스를 부여하고, 다른 연산자 키의 클래스는 제거됩니다.

---

## 예외 처리

1. = 버튼을 눌렀을 때, 연산자만 누르고 피연산자 없이 계산하려는 경우 경고창을 띄워 계산을 중단했습니다.

```javascript
if (previousButtonType === "operator") {
  return alert("완전한 수식을 입력해 주세요!");
}
```

2. 0으로 나누려는 경우, 계산을 수행하지 않고 경고창을 표시했습니다.

```javascript
if (operator === "divide" && secondValue === 0) {
  return alert("0으로 나눌 수 없습니다.");
}
```

3. 소수점 입력 시 이미 .이 포함된 경우에는 중복 입력되지 않도록 막았습니다.

```javascript
if (!result.includes(".")) {
  calculatorDisplay.textContent = result + ".";
}
```

세 가지 예외 상황을 사전에 처리함으로써, 잘못된 입력이나 계산으로 인해 발생할 수 있는 오류를 미리 방지할 수 있도록 했습니다.

---

## 오류 해결 과정

- 클리어 버튼을 찾기 위해 처음에는 `filter()`를 사용했는데, 이로 인해 `clearKey.textContent.trim()`에서 오류가 발생했습니다.

  `filter()`는 `배열`을 반환하기 때문에, textContent를 바로 사용할 수 없어서 undefined.trim() 에러가 발생한 것이었습니다.

  클리어 버튼은 하나만 있기 때문에 `find()`를 사용하여 클리어 버튼을 찾아 변수에 할당하는 방식으로 해결했습니다.

---

## 회고

처음에는 디스플레이에 연산자 기호까지 보이도록 만들어야겠다고 생각해서 방향을 그렇게 잡았는데, 한 번에 연속 계산 기능까지 구현해야 할 것처럼 느껴져서 너무 벽이 높게 느껴졌습니다...

구현하다가 막히던 부분은 노션을 참고하면서 방향을 잡을 수 있었고, 계산기에 표시되는 값은 항상 숫자만 보이게 하고, 일단 두 개의 숫자만 연산할 수 있도록 구현해 나갔습니다.

그리고 핸드폰 계산기를 직접 사용해 보면서, 어떤 상황에서 어떤 예외 처리를 추가하면 좋을지 고민하게 되었습니다. 겉보기에는 단순해 보이지만, 실제로는 다양한 예외 상황을 고려해야 하고, 여러 개의 숫자를 연산하려면 로직이 훨씬 복잡해진다는 점도 직접 체감할 수 있었습니다.

결국, 작은 기능 하나에도 놓치기 쉬운 예외와 디테일이 많다는 걸 직접 부딪히며 깨달았고, 그 경험이 이번 과제에서 가장 큰 수확이었다고 생각합니다 😊
